<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Intel HEXL for FPGA: Prerequisite -- Environment Setup for Using Intel FPGA Acceleration Card</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Intel HEXL for FPGA
   </div>
   <div id="projectbrief">Intel Homomorphic Encryption FPGA Acceleration Library, accelerating the modular arithmetic operations used in homomorphic encryption.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Prerequisite -- Environment Setup for Using Intel FPGA Acceleration Card </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Intel Acceleration Stack</h2>
<p>There are two types of Intel Acceleration Stack (version 2.0.1), namely, the <a href="https://www.intel.com/content/www/us/en/programmable/f/download/accelerator/license-agreement-pac-d5005.html?swcode=WWW-SWD-IAS-RTE-201">Acceleration Stack for Runtime</a> and the <a href="https://www.intel.com/content/altera-www/global/en_us/index/f/download/accelerator/pac-d5005-thank-you.html?swcode=WWW-SWD-IAS-DEV-201">Acceleration Stack for Development</a>. The runtime stack provides a smaller footprint package for software development of runtime host application. It includes Intel FPGA Runtime Environment (RTE) for OpenCL but does not include Intel Quartus Prime; thus, it assumes that the FPGA bitstreams are available. The development stack allows for accelerator function development using the Intel Quartus Prime Pro Edition software (required and included). Additionally, it comes with the Intel FPGA Software Development Kit (SDK) for OpenCL and the Acceleration Stack. <br/>
</p>
<p>The Intel Acceleration Stack for development (<code>d5005_pac_ias_2_0_1_pv_dev_installer.tar.gz</code>) is encouraged and required to reap the full benefits of Intel HEXL for FPGA, especially before attempting to build the FPGA kernels and if intended usage of Intel HEXL for FPGA includes development contributions. Download, read more detailed installation instructions, updates and related additional resources at <a href="https://www.intel.com/content/www/us/en/programmable/products/boards_and_kits/dev-kits/altera/intel-fpga-pac-d5005/getting-started.html">Intel Acceleration Stack link</a>. <br/>
</p>
<p>Note: Even though the validated operating system is RHEL 7.6, we used CentOS 7.9 without issues.<br/>
</p>
<h2>Intel Quartus Prime Pro Edition</h2>
<p>Quartus Prime version 19.2 is installed in the Acceleration Stack installation. For Intel HEXL for FPGA, the installation of Quartus Prime version 20.3 is required. <a href="https://fpgasoftware.intel.com/20.3/?edition=pro">Download the complete version</a> and follow the instructions below. <br/>
</p>
<p>``` tar xvf Quartus-pro-20.3.0.158-linux-complete.tar ./setup_pro.sh ```</p>
<p>Use the following configuration:<br/>
</p>
<p>``` Select the components you want to install:</p>
<p>Quartus Prime Pro Edition [Y/n]: Y</p>
<p>ModelSim &ndash; Intel FPGA Starter Edition (Free) (17169.4MB) [Y/n]: n</p>
<p>ModelSim &ndash; Intel FPGA Edition (Free) (17169.4MB) [Y/n]: n</p>
<p>Intel High Level Synthesis Compiler (2481.9MB) [Y/n]: Y</p>
<p>DSP Builder Pro Edition (185.8MB) [Y/n]: n</p>
<p>Intel FPGA SDK for OpenCL Pro Edition (1822.6MB) [Y/n]: Y ```</p>
<p>Note that the installation of Intel HLS compiler is required to compile the smaller IP modules that support the larger kernels with modular addition and modular multiplication arithmetic.<br/>
</p>
<h2>Intel OneAPI</h2>
<p>Install the oneAPI Toolkit from the following site: <br/>
</p>
<p><a href="https://software.intel.com/content/www/us/en/develop/articles/installation-guide-for-intel-oneapi-toolkits.html">Installation Guide for Intel OneAPI Toolkits</a>.<br/>
</p>
<p>More information on the FPGA related components can be found on this <a href="https://software.intel.com/content/www/us/en/develop/tools/oneapi/components/fpga.html#gs.6nbq2b">here</a>. <br/>
</p>
<p>Instructions on direct installation via yum located at <a href="https://software.intel.com/content/www/us/en/develop/documentation/installation-guide-for-intel-oneapi-toolkits-linux/top/installation/install-using-package-managers/yum-dnf-zypper.html">https://software.intel.com/content/www/us/en/develop/documentation/installation-guide-for-intel-oneapi-toolkits-linux/top/installation/install-using-package-managers/yum-dnf-zypper.html</a>. <br/>
</p>
<p>``` sudo yum install intel-basekit sudo yum install intel-oneapi-intelfpgadpcpp-custom-platforms-quartus20.3 ```</p>
<h2>Initializing the FPGA Environment</h2>
<p>Upon completion of the installation of the FPGA software stack, the next step is to initialize the environment for FPGA runtime and development. We provide below an example script that automates this process, in particular for the combination of software versions installed. <br/>
</p>
<p>``` </p>
<h1>init_env.sh</h1>
<p>export QUARTUS_HOME="/disk1/tools/intelFPGA_pro/19.2/quartus" export OPAE_PLATFORM_ROOT="/disk1/tools/inteldevstack/d5005_ias_2_0_1_b237"</p>
<p>export AOCL_BOARD_PACKAGE_ROOT="/disk1/tools/inteldevstack/d5005_ias_2_0_1_b237/opencl/opencl_bsp" if ls /dev/intel-fpga-* 1&gt; /dev/null 2&gt;&amp;1; then source $AOCL_BOARD_PACKAGE_ROOT/linux64/libexec/setup_permissions.sh &gt;&gt; /dev/null fi</p>
<p>OPAE_PLATFORM_BIN="/disk1/tools/inteldevstack/d5005_ias_2_0_1_b237/bin" if [[ ":${PATH}:" = *":${OPAE_PLATFORM_BIN}:"* ]] ;then echo "\$OPAE_PLATFORM_ROOT/bin is in PATH already" else echo "Adding \$OPAE_PLATFORM_ROOT/bin to PATH" export PATH="${PATH}":"${OPAE_PLATFORM_BIN}" fi</p>
<p>echo export AOCL_BOARD_PACKAGE_ROOT="/opt/intel/oneapi/intelfpgadpcpp/latest/board/intel_s10sx_pac" export AOCL_BOARD_PACKAGE_ROOT="/opt/intel/oneapi/intelfpgadpcpp/latest/board/intel_s10sx_pac" if ls /dev/intel-fpga-* 1&gt; /dev/null 2&gt;&amp;1; then echo source $AOCL_BOARD_PACKAGE_ROOT/linux64/libexec/setup_permissions.sh source $AOCL_BOARD_PACKAGE_ROOT/linux64/libexec/setup_permissions.sh &gt;&gt; /dev/null fi</p>
<p>echo export INTELFPGAOCLSDKROOT="/disk1/tools/intelFPGA_pro/20.3/hld" export INTELFPGAOCLSDKROOT="/disk1/tools/intelFPGA_pro/20.3/hld"</p>
<h1>Enable Backwards Compatibility with older BSP</h1>
<p>export ACL_ACDS_VERSION_OVERRIDE="19.2" export QUARTUS_ROOTDIR_OVERRIDE="/disk1/tools/intelFPGA_pro/quartus_19.2.0b57/quartus"</p>
<p>echo export ALTERAOCLSDKROOT=$INTELFPGAOCLSDKROOT export ALTERAOCLSDKROOT=$INTELFPGAOCLSDKROOT export PAC_DMA_WORK_THREAD=yes</p>
<p>QUARTUS_BIN="/disk1/tools/intelFPGA_pro/20.3/quartus/bin" if [[ ":${PATH}:" = *":${QUARTUS_BIN}:"* ]] ;then echo "\$QUARTUS_HOME/bin is in PATH already" else echo "Adding \$QUARTUS_HOME/bin to PATH" export PATH="${QUARTUS_BIN}":"${PATH}" fi</p>
<p>export AOCL_BOARD_PACKAGE_ROOT=/opt/intel/oneapi/intelfpgadpcpp/latest/board/intel_s10sx_pac source $INTELFPGAOCLSDKROOT/init_opencl.sh &gt;&gt; /dev/null</p>
<p>aocl initialize acl0 pac_s10_usm ```</p>
<p>The script above needs to be modified to reflect the real paths where the installation have been placed. This initialization process requires sudo (administrator) privileges. The OneAPI <code>AOCL_BOARD_PACKAGE_ROOT</code> variable value may differ from the example, depending from the source package, which could be <code>AOCL_BOARD_PACKAGE_ROOT="/opt/intel/oneapi/compiler/2021.3.0/linux/lib/oclfpga/board/intel_s10sx_pac</code>. Try <code>locate intel_s10sx_pac</code> to find out the actual path.</p>
<h3>Fix Permissions on /dev Files</h3>
<p>The PAC D5005 requires sudo access with default permissions. This needs to be modified at least once during installation. The unmodified version of <code>init_env.sh</code> performs this step every time it is called, but that requires all users to have sudo access to source <code>init_env.sh</code>. Instead, run the permission setting script on its own after modifying <code>init_env.sh</code>.</p>
<p>``` $ source $AOCL_BOARD_PACKAGE_ROOT/linux64/libexec/setup_permissions.sh Configuring locked memory setting Configuring udev rules for intel-fpga device permission Configuring system with 2048 2M hugepages Finished setup_permissions.sh script. All configuration settings are persistent. ``` </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
