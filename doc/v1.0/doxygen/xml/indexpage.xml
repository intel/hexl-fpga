<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.5">
  <compounddef id="indexpage" kind="page">
    <compoundname>index</compoundname>
    <title>Intel HEXL for FPGA</title>
    <detaileddescription>
<para><heading level="1">Intel Homomorphic Encryption Acceleration Library for FPGAs <linebreak/>
(Intel HEXL for FPGA)</heading>
</para><para>Intel:registered: HEXL for FPGA is an open-source library that provides an implementation of homomorphic encryption primitives on Intel FPGAs. Intel HEXL for FPGA targets integer arithmetic with word-sized primes, typically 40-60 bits. Intel HEXL for FPGA provides an API for 64-bit unsigned integers and targets Intel FPGAs.</para><para><heading level="2">Contents</heading>
</para><para><itemizedlist>
<listitem><para><ulink url="#intel-homomorphic-encryption-acceleration-library-for-fpgas-intel-hexl-for-fpga">Intel Homomorphic Encryption Acceleration Library for FPGAs (Intel HEXL for FPGA)</ulink><itemizedlist>
<listitem><para><ulink url="#contents">Contents</ulink></para></listitem><listitem><para><ulink url="#introduction">Introduction</ulink></para></listitem><listitem><para><ulink url="#setting-up-environment">Setting up Environment</ulink></para></listitem><listitem><para><ulink url="#building-intel-hexl-for-fpga">Building Intel HEXL for FPGA</ulink><itemizedlist>
<listitem><para><ulink url="#dependencies">Dependencies</ulink></para></listitem><listitem><para><ulink url="#create-build-directory-and-configure-cmake-build">Create Build Directory and Configure cmake Build</ulink><itemizedlist>
<listitem><para><ulink url="#configuration-options">Configuration Options</ulink></para></listitem></itemizedlist>
</para></listitem><listitem><para><ulink url="#compiling-intel-hexl-for-fpga">Compiling Intel HEXL for FPGA</ulink><itemizedlist>
<listitem><para><ulink url="#compiling-device-kernels">Compiling Device Kernels</ulink><itemizedlist>
<listitem><para><ulink url="#compile-kernels-for-emulation">Compile Kernels for Emulation</ulink></para></listitem><listitem><para><ulink url="#compile-kernels-for-generating-fpga-bitstream">Compile Kernels for Generating FPGA Bitstream</ulink></para></listitem></itemizedlist>
</para></listitem><listitem><para><ulink url="#compiling-host-side">Compiling Host Side</ulink></para></listitem></itemizedlist>
</para></listitem></itemizedlist>
</para></listitem><listitem><para><ulink url="#installing-intel-hexl-for-fpga">Installing Intel HEXL for FPGA</ulink></para></listitem><listitem><para><ulink url="#testing-intel-hexl-for-fpga">Testing Intel HEXL for FPGA</ulink><itemizedlist>
<listitem><para><ulink url="#run-tests-in-emulation-mode">Run Tests in Emulation Mode</ulink></para></listitem><listitem><para><ulink url="#run-tests-on-fpga-card">Run Tests on FPGA Card</ulink></para></listitem></itemizedlist>
</para></listitem><listitem><para><ulink url="#benchmarking-intel-hexl-for-fpga">Benchmarking Intel HEXL for FPGA</ulink><itemizedlist>
<listitem><para><ulink url="#run-benchmarks-in-emulation-mode">Run Benchmarks in Emulation Mode</ulink></para></listitem><listitem><para><ulink url="#run-benchmarks-on-fpga-card">Run Benchmarks on FPGA Card</ulink></para></listitem></itemizedlist>
</para></listitem><listitem><para><ulink url="#using-intel-hexl-for-fpga">Using Intel HEXL for FPGA</ulink></para></listitem><listitem><para><ulink url="#debugging">Debugging</ulink></para></listitem></itemizedlist>
</para></listitem><listitem><para><ulink url="#documentation">Documentation</ulink><itemizedlist>
<listitem><para><ulink url="#doxygen">Doxygen</ulink></para></listitem></itemizedlist>
</para></listitem><listitem><para><ulink url="#contributing">Contributing</ulink><itemizedlist>
<listitem><para><ulink url="#pull-request-acceptance-criteria-pending-performance-validation">Pull request acceptance criteria (Pending performance validation)</ulink></para></listitem><listitem><para><ulink url="#repository-layout">Repository layout</ulink></para></listitem></itemizedlist>
</para></listitem><listitem><para><ulink url="#citing-intel-hexl-for-fpga">Citing Intel HEXL for FPGA</ulink><itemizedlist>
<listitem><para><ulink url="#version-10">Version 1.0</ulink></para></listitem></itemizedlist>
</para></listitem><listitem><para><ulink url="#contributors">Contributors</ulink></para></listitem><listitem><para><ulink url="#contact-us">Contact us</ulink></para></listitem></itemizedlist>
</para><para><heading level="2">Introduction</heading>
</para><para>Many cryptographic applications, particularly homomorphic encryption (HE), rely on integer polynomial arithmetic in a finite field. HE, which enables computation on encrypted data, typically uses polynomials with degree <computeroutput>N:</computeroutput> a power of two roughly in the range <computeroutput>N=[2^{10}, 2^{14}]</computeroutput>. The coefficients of these polynomials are in a finite field with a word-sized primes, <computeroutput>p</computeroutput>, up to <computeroutput>p</computeroutput>~62 bits. More precisely, the polynomials live in the ring <computeroutput>Z_p[X]/(X^N + 1)</computeroutput>. That is, when adding or multiplying two polynomials, each coefficient of the result is reduced by the prime modulus <computeroutput>p</computeroutput>. When multiplying two polynomials, the resulting polynomials of degree <computeroutput>2N</computeroutput> is additionally reduced by taking the remainder when dividing by <computeroutput>X^N+1</computeroutput>.</para><para>The primary bottleneck in many HE applications is polynomial-polynomial multiplication in <computeroutput>Z_p[X]/(X^N + 1)</computeroutput>. Intel HEXL for FPGA provides the basic primitives that allow polynomial multiplication. For efficient implementation, Intel HEXL for FPGA uses the negacyclic number-theoretic transform (NTT). To multiply two polynomials, <computeroutput>p_1(x), p_2(x)</computeroutput> using the NTT, we perform the forward number-theoretic transform on the two input polynomials, then perform an element-wise modular multiplication, and perform the inverse number-theoretic transform on the result.</para><para>Intel HEXL for FPGA implements the following functions:<itemizedlist>
<listitem><para>The forward and inverse negacyclic number-theoretic transform (NTT).</para></listitem><listitem><para>Dyadic multiplication.</para></listitem></itemizedlist>
</para><para>For each function, the library provides an FPGA implementation using OpenCL.</para><para>For additional functionality, see the public headers, located in <computeroutput>include/hexl-fpga.h</computeroutput></para><para>Note: we provide an integrated kernel implementing the NTT/INTT and the dyadic multiplication in one file. We also provide for convenience kernels implementing only one function stand alone. Those FPGA kernels work independently of each other, i.e. one does not require the use of another. The stand alone kernels allow testing and experimentation on a single primitive.</para><para><heading level="2">Setting up Environment</heading>
</para><para>To use this code, a prerequisite is to install a PCIe card Intel PAC D5005 and its software stack, named Intel Acceleration Stack, which includes Quartus Prime, Intel FPGA SDK and Intel PAC D5005 board software package. See <ulink url="PREREQUISITE.md">PREREQUISITE.md</ulink> for details. If you have already installed the PCIe card and above mentioned softwares you can skip the procedure in the link given below. <linebreak/>
</para><para>You can find installation instructions for the FPGA PAC D5005 board software package following this link: <linebreak/>
 <ulink url="https://www.intel.com/content/www/us/en/programmable/documentation/edj1542148561811.html">Hardware/Software Installation link</ulink></para><para>Check that your installation is functional with the software environment by running the Hello FPGA test code as indicated in the above link. <linebreak/>
</para><para><heading level="2">Building Intel HEXL for FPGA</heading>
</para><para>Building Intel HEXL for FPGA library requires building all the depedencies ( mostly dealt automatically by cmake scripts) and two other separate pieces:<itemizedlist>
<listitem><para>Host application and related dependencies.</para></listitem><listitem><para>FPGA kernels and HLS libraries needed by the kernels.</para></listitem></itemizedlist>
</para><para>From user point of view it is required to go through these two main steps. Without building kernels, tests, benchmark and examples cannot be launched.</para><para><heading level="3">Dependencies</heading>
</para><para>We have tested Intel HEXL for FPGA on the following operating systems: <linebreak/>
<itemizedlist>
<listitem><para>Centos 7.9.2009 <linebreak/>
</para></listitem><listitem><para>To check your Centos 7 version: <linebreak/>
 ``` cat /etc/centos-release ```</para></listitem></itemizedlist>
</para><para>Intel HEXL for FPGA requires the following dependencies:</para><para><table rows="6" cols="2"><row>
<entry thead="yes"><para>Dependency </para></entry><entry thead="yes"><para>Version  </para></entry></row>
<row>
<entry thead="no"><para>Centos 7 </para></entry><entry thead="no"><para>7.9.2009 </para></entry></row>
<row>
<entry thead="no"><para>CMake </para></entry><entry thead="no"><para>&gt;= 3.5 </para></entry></row>
<row>
<entry thead="no"><para>Compiler </para></entry><entry thead="no"><para>g++ &gt;= 9.1 </para></entry></row>
<row>
<entry thead="no"><para>Doxygen </para></entry><entry thead="no"><para>1.8.5 </para></entry></row>
<row>
<entry thead="no"><para>Hardware </para></entry><entry thead="no"><para>PCIe Card PAC D5005 </para></entry></row>
</table>
<heading level="3">Create Build Directory and Configure cmake Build</heading>
</para><para>After cloning the git repository into your local area, you can use the following commands to set the install path and create a build directory. It will also create cmake cache files and make files that will be used for building host and kernels. Most of the build options described in previous section can be enabled or disabled by modifying the command given below:</para><para>``` cmake -S . -B build -DCMAKE_INSTALL_PREFIX=./hexl-fpga-install -DCMAKE_BUILD_TYPE=Release -DCMAKE_CXX_COMPILER=g++ -DCMAKE_C_COMPILER=gcc -DENABLE_FPGA_DEBUG=ON -DENABLE_TESTS=ON -DENABLE_DOCS=ON -DENABLE_BENCHMARK=ON ```</para><para>Different cmake options are provided allowing users to configure the overall build process. With these options the user can control if it is required to build tests, benchmark etc. Note that by default all options are off: the user must enable at least a few options to create a useful code. The recommended options can be found below. The details of these options is given in next section with default selection: <linebreak/>
</para><para><heading level="4">Configuration Options</heading>
</para><para>In addition to the standard CMake configuration options, Intel HEXL for FPGA supports several cmake options to configure the build. For convenience, they are listed below:</para><para><table rows="5" cols="3"><row>
<entry thead="yes"><para>CMake option </para></entry><entry thead="yes"><para>Values </para></entry><entry thead="yes"><para></para></entry></row>
<row>
<entry thead="no"><para>ENABLE_BENCHMARK </para></entry><entry thead="no"><para>ON / OFF (default OFF) </para></entry><entry thead="no"><para>Set to OFF, enable benchmark suite via Google benchmark </para></entry></row>
<row>
<entry thead="no"><para>ENABLE_FPGA_DEBUG </para></entry><entry thead="no"><para>ON / OFF (default OFF) </para></entry><entry thead="no"><para>Set to OFF, enable debug log at large runtime penalty </para></entry></row>
<row>
<entry thead="no"><para>ENABLE_TESTS </para></entry><entry thead="no"><para>ON / OFF (default OFF) </para></entry><entry thead="no"><para>Set to OFF, enable building of unit-tests </para></entry></row>
<row>
<entry thead="no"><para>ENABLE_DOCS </para></entry><entry thead="no"><para>ON / OFF (default OFF) </para></entry><entry thead="no"><para>Set to OFF, enable building of documentation </para></entry></row>
</table>
<heading level="3">Compiling Intel HEXL for FPGA</heading>
</para><para>Compiling HEXL for FPGA requires two steps: compiling the C++ host code and compiling the OpenCL kernels. Start by compiling the kernels as they will be needed during the host installation. Before proceeding to the compilations and installation, make sure that your environment variables are set according to the instructions in the Intel PACD5005 Software Package installation guide.</para><para><heading level="4">Compiling Device Kernels</heading>
</para><para>The kernels can be compiled in two different modes, emulation and FPGA. The emulation mode runs the kernels on the CPU. Compiling in emulation mode takes only a few minutes. The resulting bitstream can be used to verify the functionality of kernels on the CPU. The FPGA mode builds the kernel bitstream for FGPA card. Compiling the kernels in FPGA mode can take a few hours.</para><para><heading level="5">Compile Kernels for Emulation</heading>
</para><para>To compile the device kernel for running in emulation mode: <linebreak/>
 ``` cmake <ndash/>build build <ndash/>target emulation ```</para><para>This command takes a few minutes to execute.</para><para><blockquote><para>**_NOTE:_** If you are interested to run kernels in software emulation mode only then this step is enough and you can move to building the host code. If you want to run the kernels on actual FPGA board please follow the next steps for building bitstream for the FPGA card.</para><para></para></blockquote></para><para><heading level="5">Compile Kernels for Generating FPGA Bitstream</heading>
</para><para>To compile the device kernel in fpga mode: <linebreak/>
 ``` cmake <ndash/>build build <ndash/>target fpga ``` This command takes a few hours to execute.</para><para>The bitstreams will be located in the installation directory specified when calling the cmake command.(See installation below) <linebreak/>
</para><para><heading level="4">Compiling Host Side</heading>
</para><para>To build the host application, tests, benchmark, and documentation (depending on the options selected above) run the following command: ``` cmake <ndash/>build build ```</para><para>This will build the Intel HEXL for FPGA library in the <computeroutput>build/host/</computeroutput> directory. <linebreak/>
</para><para><heading level="2">Installing Intel HEXL for FPGA</heading>
</para><para>After compiling both host side and device kernels, users need to install HEXL for FPGA as a standalone library. The library is used for building and running HEXL for FPGA tests and benchmarks, and it can also be used as a third-party library. To install Intel HEXL for FPGA to the installation directory specified at configuration time: <linebreak/>
 ``` cmake <ndash/>install build ```</para><para><heading level="2">Testing Intel HEXL for FPGA</heading>
</para><para>To run a set of unit tests via Googletest run the following command ( for running the test you should have chosen <computeroutput>-DENABLE_TESTS=ON</computeroutput> otherwise tests may not be enabled) (see <ulink url="#configuration-options">Configuration Options</ulink>). <linebreak/>
 Make sure that the .aocx files have been installed in the install directory that was chosen during configuration. The default choice we made was &quot;./hexl-fpga-install&quot;. <linebreak/>
</para><para><heading level="3">Run Tests in Emulation Mode</heading>
</para><para>In emulation mode the kernel will run on the CPU and the user will be able to test and validate the kernel. <linebreak/>
 To run in emulation mode (setting RUN_CHOICE to different values informs host code about emulation mode or FPGA run): <linebreak/>
</para><para>``` export RUN_CHOICE=1 cmake <ndash/>build build <ndash/>target tests ```</para><para><heading level="3">Run Tests on FPGA Card</heading>
</para><para>To run using actual FPGA card, run the following command (setting RUN_CHOICE to different values informs host code about emulation mode or FPGA run): <linebreak/>
</para><para>``` export RUN_CHOICE=2 cmake <ndash/>build build <ndash/>target tests ``<computeroutput> The tests executables are located in</computeroutput>build/tests/` directory <linebreak/>
</para><para><heading level="2">Benchmarking Intel HEXL for FPGA</heading>
</para><para>To run a set of benchmarks via Google benchmark, configure and build Intel HEXL for FPGA with <computeroutput>-DENABLE_BENCHMARK=ON</computeroutput> (see <ulink url="#configuration-options">Configuration Options</ulink>). <linebreak/>
 Make sure that the .aocx files have been installed in <computeroutput>&lt;chosen install directory&gt;/bench/</computeroutput> directory. <linebreak/>
</para><para><heading level="3">Run Benchmarks in Emulation Mode</heading>
</para><para>To run the benchmark in emulation mode: <linebreak/>
 ``` export RUN_CHOICE=1 cmake <ndash/>build build <ndash/>target bench ``` <heading level="3">Run Benchmarks on FPGA Card</heading>
</para><para>To run the benchmark on the fpga, run <linebreak/>
 ``` export RUN_CHOICE=2 cmake <ndash/>build build <ndash/>target bench ``<computeroutput> The benchmark executables are located in</computeroutput>build/benchmark/` directory <linebreak/>
</para><para><heading level="2">Using Intel HEXL for FPGA</heading>
</para><para>The <computeroutput>examples</computeroutput> folder contains an example showing how to use Intel HEXL for FPGA library in a third-party project. See <ulink url="examples/README.md">examples/README.md</ulink> for details. <linebreak/>
</para><para><heading level="2">Debugging</heading>
</para><para>For optimal performance, Intel HEXL for FPGA does not perform input validation. In many cases the time required for the validation would be longer than the execution of the function itself. To debug Intel HEXL for FPGA, configure and build Intel HEXL for FPGA with the option <linebreak/>
 <computeroutput>-DCMAKE_BUILD_TYPE=Debug</computeroutput> This will generate a debug version of the library that can be used to debug the execution. To enable the FPGA logs, configure the build with <computeroutput>-DENABLE_FPGA_DEBUG=ON</computeroutput> (see <ulink url="#configuration-options">Configuration Options</ulink>). <linebreak/>
</para><para><blockquote><para>**_NOTE:_** Enabling <computeroutput>-DCMAKE_BUILD_TYPE=Debug</computeroutput> will result in a significant runtime overhead. <linebreak/>
</para><para></para></blockquote></para><para><heading level="1">Documentation</heading>
</para><para>See <ulink url="https://intel.github.io/hexl-fpga">https://intel.github.io/hexl-fpga</ulink> for Doxygen documentation. <linebreak/>
</para><para>Intel HEXL for FPGA supports documentation via Doxygen. To build documentation, first install <computeroutput>doxygen</computeroutput> and <computeroutput>graphviz</computeroutput>, e.g. ```bash sudo yum install doxygen graphviz ``<computeroutput> Then, configure Intel HEXL for FPGA with</computeroutput>-DENABLE_DOCS=ON` (see <ulink url="#configuration-options">Configuration Options</ulink>). <heading level="3">Doxygen</heading>
</para><para>To build Doxygen documentation, after configuring Intel HEXL for FPGA with <computeroutput>-DENABLE_DOCS=ON</computeroutput>, run ``` cmake <ndash/>build build <ndash/>target docs ``<computeroutput> To view the generated Doxygen documentation, open the generated</computeroutput>build/doc/doxygen/html/index.html` file in a web browser. <blockquote><para>**_NOTE:_** After running the cmake <ndash/>install build command, the documentation will also be available in: <linebreak/>
</para><para></para></blockquote><computeroutput>&lt;chosen install directory&gt;/doc/doxygen/html/index.html</computeroutput>.</para><para><heading level="1">Contributing</heading>
</para><para>At this time, Intel HEXL for FPGA welcomes external contributions. To contribute to Intel HEXL for FPGA, see <ulink url="CONTRIBUTING.md">CONTRIBUTING.md</ulink>. We encourage feedback and suggestions via Github Issues as well as discussion via Github Discussions.</para><para>Please use <ulink url="https://pre-commit.com/">pre-commit</ulink> to validate the formatting of the code before submitting a pull request. <linebreak/>
 To install pre-commit: <linebreak/>
 ``` pip install <ndash/>user cpplint pre-commit ``` To run pre-commit: ``` pre-commit run <ndash/>all ```</para><para><heading level="2">Pull request acceptance criteria (Pending performance validation)</heading>
</para><para>Pull requests will be accepted if they provide better acceleration, fix a bug or add a desirable new feature.</para><para>Before contributing, please run ```bash cmake <ndash/>build build <ndash/>target tests ``` and make sure pre-commit checks and all unit tests pass. <linebreak/>
</para><para>``` pre-commit run <ndash/>all ```</para><para><heading level="2">Repository layout</heading>
</para><para>Public headers reside in the <computeroutput>hexl-fpga-install/include</computeroutput> folder. Private headers, e.g. those containing fpga code should not be put in this folder.</para><para><heading level="1">Citing Intel HEXL for FPGA</heading>
</para><para>To cite Intel HEXL for FPGA, please use the following BibTeX entry.</para><para><heading level="3">Version 1.0</heading>
</para><para>```tex {IntelHEXLFPGA, author={Meng,Yan and de Souza, Fillipe and Butt, Shahzad and de Lassus, Hubert and Gonzales Aragon, Tomas and Zhou, Yongfa and Wang, Yong and others}, title = {{I}ntel {Homomorphic Encryption Acceleration Library for FPGAs for FPGA} (release 1.0)}, howpublished = {{<ulink url="https://github.com/intel/hexl-fpga">https://github.com/intel/hexl-fpga</ulink>}}, month = December, year = 2021, key = {Intel HEXL for FPGA} } ```</para><para><heading level="1">Contributors</heading>
</para><para>The Intel contributors to this project, sorted by last name, are<itemizedlist>
<listitem><para><ulink url="https://www.linkedin.com/in/paky-abu-alam-89797710/">Paky Abu-Alam</ulink></para></listitem><listitem><para><ulink url="https://www.linkedin.com/in/tomas-gonzalez-aragon/">Tomas Gonzalez Aragon</ulink></para></listitem><listitem><para><ulink url="https://www.linkedin.com/in/flavio-bergamaschi-1634141/">Flavio Bergamaschi</ulink></para></listitem><listitem><para><ulink url="https://www.linkedin.com/in/shahzad-ahmad-butt-4b44971b/">Shahzad Butt</ulink></para></listitem><listitem><para><ulink url="https://www.linkedin.com/in/hubert-de-lassus/">Hubert de Lassus</ulink></para></listitem><listitem><para><ulink url="https://www.linkedin.com/in/fillipe-d-m-de-souza-a8281820/">Fillipe D. M. de Souza</ulink></para></listitem><listitem><para><ulink url="https://www.linkedin.com/in/anil-goteti">Anil Goteli</ulink></para></listitem><listitem><para><ulink url="https://www.linkedin.com/in/jingyi-jin-655735/">Jingyi Jin</ulink></para></listitem><listitem><para><ulink url="https://www.linkedin.com/in/yan-meng-5832895/">Yan Meng</ulink></para></listitem><listitem><para><ulink url="https://www.linkedin.com/in/nir-peled-4a52266/">Nir Peled</ulink></para></listitem><listitem><para><ulink url="https://github.com/wangyon1/">Yong Wang</ulink></para></listitem><listitem><para><ulink url="https://www.linkedin.com/in/yongfa-zhou-16217166/">Yongfa Zhou</ulink></para></listitem></itemizedlist>
</para><para><heading level="1">Contact us</heading>
</para><para><itemizedlist>
<listitem><para><ulink url="mailto:he_fpga_support@intel.com">he_fpga_support@intel.com</ulink> </para></listitem></itemizedlist>
</para>    </detaileddescription>
  </compounddef>
</doxygen>
